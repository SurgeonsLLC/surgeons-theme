{%- comment -%}
  renders newsletter form
  usage
    {%- render 'newsletter-form', section_prefix_class: section_prefix_class, form_id: id -%}
{%- endcomment -%}
{%- liquid
  capture form_class
    echo 'newsletter-form' | append: ' ' | append: prefix_class | append: '--newsletter-form'
  endcapture
-%}
{% form 'customer', id: form_id, class: form_class %}
  <input type="hidden" name="contact[tags]" value="newsletter">
  <div class="newsletter-form_form-group">
    <div class="newsletter-form_group-wrap">
      <div class="newsletter-form_input-wrap">
        <div class="newsletter-form_input-wrap-name">
          <label class="visually-hidden" for="{{ section.id }}NewsletterForm_name-input">
            {{- 'newsletter.name_label' | t -}}
          </label>
          <input type="text" id="{{ section.id }}NewsletterForm_name-input" name="contact[Name]" placeholder="{{- 'newsletter.name_placeholder' | t -}}">
        </div>
        <div class="newsletter-form_input-wrap-email">
          <label class="visually-hidden" for="{{ section.id }}NewsletterForm_email-input">
            {{- 'newsletter.email_label' | t -}}
          </label>
          <input
            id="{{ section.id }}NewsletterForm_email-input"
            class="newsletter-form_email-input"
            type="email"
            name="contact[email]"
            value="{{- form.email -}}"
            aria-required="true"
            onkeydown="validation()"
            autocapitalize="off"
            autocomplete="email"
            title="{{- 'newsletter.email_label' | t -}}"
            {% if form.errors %}
              autofocus
              aria-invalid="true"
              aria-describedby="NewsletterFormError-{{- section.id -}}"
            {% elsif form.posted_successfully? %}
              aria-describedby="NewsletterFormSuccess-{{- section.id -}}"
            {% endif %}
            placeholder="{{- 'newsletter.email_placeholder' | t -}}"
            required
          >
          <div class="newsletter-form_results-wrap results-wrap_message">
            {%- if form.errors -%}
              <div class="newsletter-form_errors-wrap">
                <div id="NewsletterFormError-{{- section.id -}}" class="{{ section_prefix_class }}_error-wrapper" role="status">
                  <i class="{{ section_prefix_class }}_error-icn">
                    {%- render 'icons-data', width: 22, height: 22, use_icon: true, icon_reference: 'error' -%}
                  </i>
                  <span class="visually-hidden">
                    {{- 'newsletter.error_text' | t -}}
                  </span>
                  {{- form.errors.translated_fields.email | capitalize }} {{ form.errors.messages.email -}}
                </div>
              </div>
            {%- endif -%}
          </div>
        </div>
      </div>
      <button type="submit" class="button newsletter-form_btn button--{{ section.settings.type }}">
        <span class="newsletter-btn_wrapper">
          {% if section.settings.button_label != blank %}
            <span>{{- section.settings.button_label -}}</span>
          {% else %}
            <span>{{- 'newsletter.btn_label' | t -}}</span>
          {% endif %}
        </span>
      </button>
      {%- if form.posted_successfully? -%}
        <div class="newsletter-form_success-wrap">
          <div id="NewsletterFormSuccess-{{- section.id -}}" class="success-message mty" role="alert" tabindex="-1" autofocus>
            <i class="success-message_icn">
              {%- render 'icons-data', width: 54, height: 54, use_icon: true, icon_reference: 'smile' -%}
            </i>
            <p>{{- 'newsletter.success_text' | t -}}</p>
          </div>
        </div>
      {%- endif -%}
    </div>
  </div>
{% endform %}