{%- comment -%}
  renders carousel card banner slide on section templates
  usage
    {%- render 'carousel-card-banner-slide', card: block, index: forloop.index, height: section_height_class, prefix_class: section_prefix_class, section_mobile_height_class: section_mobile_height_class -%}
{%- endcomment -%}
{% liquid
  assign product_one = card.settings.banner_one_product_card

  if product_one.selected_or_first_available_variant.featured_media != null
    assign media_one = product_one.selected_or_first_available_variant.featured_media
    else
      for media in product_one.media
        assign media_one = media
        break
      endfor
  endif

  assign product_two = card.settings.banner_two_product_card

  if product_two.selected_or_first_available_variant.featured_media != null
    assign media_two = product_two.selected_or_first_available_variant.featured_media
    else
      for media in product_two.media
        assign media_two = media
        break
      endfor
  endif

  capture content_alignment_one
    case card.settings.banner_one_block_content_position
      when 'top_left'
        echo 'tleft'
      when 'top_right'
        echo 'tright'
      when 'centered'
        echo 'mcenter'
      when 'bottom_left'
        echo 'bleft'
      when 'bottom_right'
        echo 'bright'
    endcase
  endcapture

  capture content_alignment_two
    case card.settings.banner_two_block_content_position
      when 'top_left'
        echo 'tleft'
      when 'top_right'
        echo 'tright'
      when 'centered'
        echo 'mcenter'
      when 'bottom_left'
        echo 'bleft'
      when 'bottom_right'
        echo 'bright'
    endcase
  endcapture
%}
{%- capture loading_attr -%}
  {%- unless index != 1 -%}
    loading="eager"
    {%- else -%}
      loading="lazy"
  {%- endunless -%}
{%- endcapture -%}
<article class="carousel-card carousel-banner_two-col {{ prefix_class }}-{{ card.id }}-{{section.id}}">
  <div class="carousel-banner_one carousel-banner_col">
    <div class="carousel-height">
      <div class="carousel-card_bg-wrapper" style="--overlay-bg: {{ card.settings.banner_one_background }}">
        {%- if card.settings.banner_one_upload_video != blank -%}
          <div class="carousel-card_image {{ height }} {{ section_mobile_height_class }}">
            {{ card.settings.banner_one_upload_video | video_tag: image_size: 1555, autoplay: true, loop: true, controls: false, muted: true, class: 'object-fit object-fit--absolute' }}
          </div>
        {%- elsif card.settings.banner_one_image -%}
          <div class="carousel-card_image {{ height }} {{ section_mobile_height_class }}">
            {%- liquid
              capture image_alt
                if card.settings.banner_one_image.alt != blank
                  echo card.settings.banner_one_image.alt
                  else
                    echo card.settings.heading | escape
                endif
              endcapture
    
              assign image_height = 558 | divided_by: card.settings.banner_one_image.aspect_ratio | round
            -%}
            {%- unless index != 1 -%}
              {{- card.settings.banner_one_image | image_url: width: 1920 | image_tag:
                class: 'object-fit object-fit--absolute',
                fetchpriority: 'high',
                width: 660,
                height: image_height,
                widths: '320, 412, 768, 992, 1260, 1350, 1440, 1640, 1920',
                sizes: '100vw',
                alt: image_alt
              -}}
              {%- else -%}
                {{- card.settings.banner_one_image | image_url: width: 1920 | image_tag:
                  class: 'object-fit object-fit--absolute',
                  loading: 'lazy',
                  width: 660,
                  height: image_height,
                  widths: '320, 412, 768, 992, 1260, 1350, 1440, 1640, 1920',
                  sizes: '100vw',
                  alt: image_alt
                -}}
            {%- endunless -%}
          </div>
        {% else %}
          <div class="carousel-card_image {{ height }} {{ section_mobile_height_class }}">
            {%- render 'placeholder-svgs', type: 'hero', index: 1, class: 'object-fit object-fit--absolute' -%}
          </div>
        {%- endif -%}
        {%- if card.settings.banner_one_enable_product_card -%}
          <a
            {% if product_one.url != blank %}href="{{- product_one.url -}}"{% else %}aria-disabled="true"{% endif %}
            class="carousel-card_product {{ content_alignment_one }} {% if card.settings.banner_one_upload_video != blank %}carousel-card_product--none{% endif %} {% if settings.enable_viewport_anim %}viewport-block{% endif %}"
            data-margin="0px 0px -20px 0px"
            data-frames='[{"opacity":"0","transform":"translateX(-15px)"},{"opacity":"1","transform":"translateX(0px)"}]'
            data-options='{"duration":1000,"easing":"ease","delay":0,"fill":"both","iterations":1}'
          >
            <div class="product-card_img --media-size-square" style="--media-ratio: 1;">
              {%- if media_one != blank -%}
                {%- liquid
                  capture image_alt
                    unless media_one.preview_image.alt == blank
                      echo media_one.preview_image.alt
                      else
                        echo 'index_image.alt' | t: index: index
                    endunless
                  endcapture
                -%}
                <img
                  srcset="{%- if media_one.preview_image.width >= 191 -%}{{ media_one.preview_image | image_url: width: 191 }} 191w,{%- endif -%}
                          {%- if media_one.preview_image.width >= 348 -%}{{ media_one.preview_image | image_url: width: 348 }} 348w,{%- endif -%}
                          {%- if media_one.preview_image.width >= 384 -%}{{ media_one.preview_image | image_url: width: 384 }} 384w,{%- endif -%}
                          {%- if media_one.preview_image.width >= 522 -%}{{ media_one.preview_image | image_url: width: 522 }} 522w,{%- endif -%}
                            {{ media_one.preview_image | image_url: width: media_one.preview_image.width }} {{ media_one.preview_image.width }}w"
                  sizes="(max-width: 1259px) calc((100vw * 40 / 100) - 24px), calc((var(--cp-width-px) * 40 / 100) - 24px)"
                  src="{{- media_one.preview_image | image_url: width: 191 -}}"
                  alt="{{- image_alt -}}"
                  {{ loading_attr }}
                  width= "191"
                  height="{{- 191 | divided_by: media_one.preview_image.aspect_ratio | round -}}"
                  class="object-fit object-fit--absolute"
                >
              {%- else -%}
                {%- render 'placeholder-svgs', type: 'hero', index: 2, class: 'object-fit object-fit--absolute' -%}
              {%- endif -%}
              <span class="visually-hidden">
                {{ 'index_image.alt' | t: index: index }}
              </span>
            </div>
            <div class="product-card_content-wrapper widget--styles --align-left">
              {%- if product_one.title != blank -%}
                <h2 class="product-card_title h6 --fw-bold --word-break mty">
                  {{- product_one.title -}}
                </h2>
                {%- else -%}
                  <h2 class="product-card_title h6 --fw-bold --word-break mty">
                    {{- 'product.title' | t -}}
                  </h2>
              {%- endif -%}
              {%- if card.settings.banner_one_product_description != blank -%}
                <div class="product-card_description text-size--small --fw-normal --word-break mty">
                  {{- card.settings.banner_one_product_description -}}
                </div>
              {%- endif -%}
              <strong class="product-card_price text-size--xlarge --fw-semi-bold mty">
                {%- render 'product-price', product: product_one, use_variant: false, show_unit_price: true -%}
              </strong>
            </div>
          </a>
        {%- endif -%}
      </div>
    </div>
    {% if card.settings.heading != blank %}
      <h3 class="carousel-card_title --word-break mty {{ card.settings.banner_one_heading_size }} {{ card.settings.banner_one_heading_weight }}">
        {{- card.settings.heading -}}
      </h3>
    {% endif %}
  </div>
  <div class="carousel-banner_two carousel-banner_col">
    <div class="carousel-height">
      <div class="carousel-card_bg-wrapper" style="--overlay-bg: {{ card.settings.banner_two_background }}">
        {%- if card.settings.banner_two_upload_video != blank -%}
          <div class="carousel-card_image {{ height }} {{ section_mobile_height_class }}">
            {{ card.settings.banner_two_upload_video | video_tag: image_size: 1555, autoplay: true, loop: true, controls: false, muted: true, class: 'object-fit object-fit--absolute' }}
          </div>
        {%- elsif card.settings.banner_two_image -%}
          <div class="carousel-card_image {{ height }} {{ section_mobile_height_class }}">
            {%- liquid
              capture image_alt
                if card.settings.banner_two_image.alt != blank
                  echo card.settings.banner_two_image.alt
                  else
                    echo card.settings.banner_two_heading | escape
                endif
              endcapture
    
              assign image_height = 558 | divided_by: card.settings.banner_two_image.aspect_ratio | round
            -%}
            {%- unless index != 1 -%}
              {{- card.settings.banner_two_image | image_url: width: 1920 | image_tag:
                class: 'object-fit object-fit--absolute',
                fetchpriority: 'high',
                width: 660,
                height: image_height,
                widths: '320, 412, 768, 992, 1260, 1350, 1440, 1640, 1920',
                sizes: '100vw',
                alt: image_alt
              -}}
              {%- else -%}
                {{- card.settings.banner_two_image | image_url: width: 1920 | image_tag:
                  class: 'object-fit object-fit--absolute',
                  loading: 'lazy',
                  width: 660,
                  height: image_height,
                  widths: '320, 412, 768, 992, 1260, 1350, 1440, 1640, 1920',
                  sizes: '100vw',
                  alt: image_alt
                -}}
            {%- endunless -%}
          </div>
        {% else %}
          <div class="carousel-card_image {{ height }} {{ section_mobile_height_class }}">
            {%- render 'placeholder-svgs', type: 'hero', index: 2, class: 'object-fit object-fit--absolute' -%}
          </div>
        {%- endif -%}
        {%- if card.settings.banner_two_enable_product_card -%}
          <a
            {% if product_two.url != blank %}href="{{- product_two.url -}}"{% else %}aria-disabled="true"{% endif %}
            class="carousel-card_product carousel-banner-product-two {{ content_alignment_two }} {% if card.settings.banner_two_upload_video != blank %}carousel-card_product--none{% endif %} {% if settings.enable_viewport_anim %}viewport-block{% endif %}"
            data-margin="0px 0px -20px 0px"
            data-frames='[{"opacity":"0","transform":"translateX(-15px)"},{"opacity":"1","transform":"translateX(0px)"}]'
            data-options='{"duration":1000,"easing":"ease","delay":200,"fill":"both","iterations":1}'
          >
            <div class="product-card_img --media-size-square" style="--media-ratio: 1;">
              {%- if media_two != blank -%}
                {%- liquid
                  capture image_alt
                    unless media_two.preview_image.alt == blank
                      echo media_two.preview_image.alt
                      else
                        echo 'index_image.alt' | t: index: index
                    endunless
                  endcapture
                -%}
                <img
                  srcset="{%- if media_two.preview_image.width >= 191 -%}{{ media_two.preview_image | image_url: width: 191 }} 191w,{%- endif -%}
                          {%- if media_two.preview_image.width >= 348 -%}{{ media_two.preview_image | image_url: width: 348 }} 348w,{%- endif -%}
                          {%- if media_two.preview_image.width >= 384 -%}{{ media_two.preview_image | image_url: width: 384 }} 384w,{%- endif -%}
                          {%- if media_two.preview_image.width >= 522 -%}{{ media_two.preview_image | image_url: width: 522 }} 522w,{%- endif -%}
                            {{ media_two.preview_image | image_url: width: media_two.preview_image.width }} {{ media_two.preview_image.width }}w"
                  sizes="(max-width: 1259px) calc((100vw * 40 / 100) - 24px), calc((var(--cp-width-px) * 40 / 100) - 24px)"
                  src="{{- media_two.preview_image | image_url: width: 191 -}}"
                  alt="{{- image_alt -}}"
                  {{ loading_attr }}
                  width= "191"
                  height="{{- 191 | divided_by: media_two.preview_image.aspect_ratio | round -}}"
                  class="object-fit object-fit--absolute"
                >
              {%- else -%}
                {%- render 'placeholder-svgs', type: 'hero', index: 1, class: 'object-fit object-fit--absolute' -%}
              {%- endif -%}
              <span class="visually-hidden">
                {{ 'index_image.alt' | t: index: index }}
              </span>
            </div>
            <div class="product-card_content-wrapper widget--styles --align-left">
              {%- if product_two.title != blank -%}
                <h2 class="product-card_title h6 --fw-bold --word-break mty">
                  {{- product_two.title -}}
                </h2>
                {%- else -%}
                  <h2 class="product-card_title h6 --fw-bold --word-break mty">
                    {{- 'product.title' | t -}}
                  </h2>
              {%- endif -%}
              {%- if card.settings.banner_two_product_description != blank -%}
                <div class="product-card_description text-size--small --fw-normal --word-break mty">
                  {{- card.settings.banner_two_product_description -}}
                </div>
              {%- endif -%}
              <strong class="product-card_price text-size--xlarge --fw-semi-bold mty">
                {%- render 'product-price', product: product_two, use_variant: false, show_unit_price: true -%}
              </strong>
            </div>
          </a>
        {%- endif -%}
      </div>
    </div>
    {% if card.settings.banner_two_heading != blank %}
      <h3
        class="carousel-card_title carousel-card_title-two --word-break mty {{ card.settings.banner_two_heading_size }} {{ card.settings.banner_two_heading_weight }} {% if settings.enable_viewport_anim %}viewport-block{% endif %}"
        data-margin="0px 0px -20px 0px"
        data-frames='[{"opacity":"0","transform":"translateY(5px)"},{"opacity":"1","transform":"translateY(0px)"}]'
        data-options='{"duration":1000,"easing":"ease","delay":200,"fill":"both","iterations":1}'
      >
        {{- card.settings.banner_two_heading -}}
      </h3>
    {% endif %}
  </div>
</article>