{%- liquid
  assign section_prefix_class = 'before-after-content'
  assign section_scheme_class = section.settings.section_color_scheme | prepend: 'scheme scheme--'

  capture content_unavailable
    if section.settings.heading != blank or section.settings.section_description != blank or section.settings.view_more_label != blank
      echo '--image-contain'
      else
        echo '--no-contain'
    endif
  endcapture

  capture bf_height
    case section.settings.bf_height
      when 'small'
        echo '--small-height'
      when 'medium'
        echo '--medium-height'
      when 'large'
        echo '--large-height'
    endcase
  endcapture

  capture loading_attr
    unless section.index != 1
      echo 'eager'
      else
        echo 'lazy'
    endunless
  endcapture

  capture section_container_layout
    case section.settings.section_container_layout
      when 'page-width'
        echo 'container'
      when 'contained-content'
        echo 'contained-container'
      when 'container-fluid'
        echo 'container-fluid'
    endcase
  endcapture

  capture section_corner_radius
    case section.settings.section_corner_radius
      when 'top_corners_radius'
        echo 'top_corners_radius'
      when 'bottom_corners_radius'
        echo 'bottom_corners_radius'
      when 'both_corners_radius'
        echo 'both_corners_radius'
      when 'no_corners_radius'
        echo 'no_corner_radius'
    endcase
  endcapture
-%}
{%- style -%}
  .before-after_description{
    --mt-top: 24px;
  }

  .bf-wrapper{
    position: relative;
  }
  
  .bf-wrapper,
  strong.h5.before-after-content_caption-title,
  strong.h4.before-after-content_caption-title,
  strong.h6.before-after-content_caption-title{
    display: block;
  }

  .bf-wrapper,
  .bf-wrapper_pointer input[type="range"],
  .bf-wrapper_image--before,
  .bf-wrapper_image--after,
  .bf-wrapper_pointer,
  .bf-wrapper_point,
  .before-after-content_wrapper.--full-width .before-after-content_col-media,
  .before-after-content_wrapper.--full-width .before-after-content_col-description,
  .before-after-content_col-media.--no-contain,
  .before-after-content_col-description,
  .before-after-content_col-media,
  .bf-caption.--full-width{
    width: 100%;
  }

  .bf-wrapper, .bf-wrapper_image, .bf-wrapper_image--after, .bf-wrapper_pointer{
    --height-factor: 0.5;
  }

  .bf-wrapper_image--after{
    clip-path: inset(0% 0% 0% var(--after-placement, 50%));
  }

  .before-after-content_image-wrap,
  .bf-wrapper_image--after{
    overflow: hidden;
  }

  .bf-wrapper_image--after,
  .bf-wrapper_pointer,
  .bf-wrapper_image--before,
  .bf-wrapper_point::after,
  .bf-wrapper_point,
  .bf-outer-wrap,
  .bf-wrapper{
    height: 100%;
  }

  .bf-wrapper_image--before,
  .bf-wrapper_image--after,
  .bf-wrapper_pointer,
  .bf-wrapper_point,
  .bf-wrapper_point::before,
  .bf-wrapper_point::after,
  .bf-caption_col{
    top: 0;
  }
  
  .bf-wrapper_image--before,
  .bf-wrapper_image--after,
  .bf-wrapper_pointer,
  .bf-wrapper_point,
  .bf-wrapper_point::before,
  .bf-wrapper_point::after,
  .bf-caption_col--first{
    left: 0;
  }

  .bf-wrapper_image--before,
  .bf-wrapper_image--after,
  .bf-wrapper_pointer,
  .bf-wrapper_point,
  .bf-wrapper_point::before,
  .bf-wrapper_point::after,
  .bf-caption_col{
    position: absolute;
  }

  .bf-wrapper_pointer,
  .bf-caption,
  .before-after-content_col-description,
  .before-after-content_wrapper{
    display: flex;
  }

  .bf-caption_col{
    max-height: 200px;
    overflow-y: auto;
    width: 50%;
    padding: 10px;
  }

  .bf-caption_col,
  .bf-wrapper_point::after,
  .bf-wrapper_image--after{
    z-index: 1;
  }

  .bf-caption_col--second{
    right: 0;
  }

  .bf-wrapper_pointer input[type="range"]{
    --focus-outline-offset: 1px;
    -webkit-appearance: none;
    background: transparent;
    cursor: grab;
    margin: 0;
    margin-top: -8px;
  }

  .bf-wrapper_pointer input[type="range"],
  .bf-wrapper_point::before{
    z-index: 2;
  }

  .bf-wrapper_pointer input[type="range"]::-webkit-slider-thumb:focus,
  .bf-wrapper_pointer input[type="range"]::-webkit-slider-thumb:focus-visible{
    outline: none;
  }

  .bf-wrapper_pointer input[type="range"]::-webkit-slider-thumb{
    opacity: 0;
  }

  .bf-wrapper_pointer input[type="range"]::-moz-range-thumb{
    opacity: 0;
  }

  .bf-wrapper_pointer input[type="range"]::-webkit-slider-thumb:focus,
  .bf-wrapper_pointer input[type="range"]::-webkit-slider-thumb:focus-visible{
    outline: none;
  }

  .bf-wrapper_pointer input[type="range"]:focus::-webkit-slider-thumb,
  .bf-wrapper_pointer input[type="range"]:focus-visible::-webkit-slider-thumb{
    opacity: 0;
  }

  .bf-wrapper_error-text{
    color: var(--section-error-color);
  }

  .bf-wrapper_point::before,
  .bf-wrapper_point::after,
  .bf-wrapper_point::before{
    content: '';
  }

  .bf-wrapper_point::before,
  .bf-wrapper_point::after{
    pointer-events: none;
  }

  .bf-wrapper_point::before{
    height: 68px;
    width: 88px;
    top: 50%;
    left: var(--after-placement);
    transform: translate(-50%, -50%);
    border-radius: var(--section-radius);
    background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNjYiIHZpZXdCb3g9IjAgMCA0NSA2NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOSAzLjAwMDAyQzE5IDcuMTg2MzUgMTUuODMzNiAxMC41OTk5IDEyLjEyMDcgMTIuNTMzOEM0LjkxODIgMTYuMjg1MyAwIDIzLjgxOTQgMCAzMi41MDIxQzAgNDAuODI4OSA0LjUyMzExIDQ4LjA5OTEgMTEuMjQ2NCA1MS45OTAxQzE1LjM2NjggNTQuMzc0NiAxOSA1OC4yNDEzIDE5IDYzLjAwMTlDMTkgNjQuNjU4OCAyMC4zNDMyIDY2LjAwMiAyMiA2Ni4wMDJDMjMuNjU2OSA2Ni4wMDIgMjUgNjQuNjU4OCAyNSA2My4wMDE5QzI1IDU4LjM3MDIgMjguNjI5MyA1NC42NSAzMi43NTA5IDUyLjUzN0M0MC4wMjM1IDQ4LjgwODUgNDUuMDAwNCA0MS4yMzY1IDQ1LjAwMDQgMzIuNTAyMUM0NS4wMDA0IDIzLjQxMjkgMzkuNjEwOSAxNS41ODIzIDMxLjg1MzIgMTIuMDMyQzI4LjE1OCAxMC4zNDA5IDI1IDcuMDYzODEgMjUgMy4wMDAwMkMyNSAxLjM0MzE2IDIzLjY1NjkgMCAyMiAwQzIwLjM0MzIgMCAxOSAxLjM0MzE2IDE5IDMuMDAwMDJaIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIzMS4xMjUiIHk9IjI0IiB3aWR0aD0iMTcuMzAxOSIgaGVpZ2h0PSIyLjU2NjcxIiB0cmFuc2Zvcm09InJvdGF0ZSg5MCAzMS4xMjUgMjQpIiBmaWxsPSIjMTgxODE4Ii8+CjxyZWN0IHg9IjI0LjM0NTciIHk9IjI0IiB3aWR0aD0iMTcuMzAxOSIgaGVpZ2h0PSIyLjU2NjcxIiB0cmFuc2Zvcm09InJvdGF0ZSg5MCAyNC4zNDU3IDI0KSIgZmlsbD0iIzE4MTgxOCIvPgo8cmVjdCB4PSIxNy41NjY0IiB5PSIyNCIgd2lkdGg9IjE3LjMwMTkiIGhlaWdodD0iMi41NjY3MSIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgMTcuNTY2NCAyNCkiIGZpbGw9IiMxODE4MTgiLz4KPC9zdmc+Cg==');
    background-repeat: no-repeat;
    background-position: 50% 50%; 
    background-size: 50% auto;
    margin-top: -4px;
  }

  .bf-wrapper_point::after{
    border-right: 7px solid #fff;
    width: calc(var(--after-placement, 50%) + 3px);
  }

  .bf-caption.--row-reverse{
    margin-left: auto;
  }

  .before-after-content{
    --q-align-value: var(--mobile-q-align);
  }

  .before-after-content_wrapper{
    gap: 20px 10px;
    flex-direction: column;
  }

  .before-after-content .video-card .video-card_media,
  .before-after-content_image-wrap{
    min-height: 150px;
  }

  .before-after-content_image-wrap{
    border-radius: var(--section-radius);
  }

  .before-after-content_image-wrap img,
  .bf-wrapper_image svg, .bf-wrapper_image img{
    border-radius: inherit;
  }

  strong.h5.before-after-content_caption-title,
  strong.h4.before-after-content_caption-title,
  strong.h6.before-after-content_caption-title{
    margin-bottom: 17px;
    margin-top: 0;
  }

  .before-after-content_caption {
    margin-bottom: 30px;
    margin-top: 4px;
  }

  .before-after-content_foot{
    margin-top: 45px;
  }

  .before-after-content_description ul{
    padding-left: 0;
  }

  .before-after-content_col-media{
    flex-shrink: 0;
  }

  .before-after-content_col-description{
    flex-grow: 1;
    padding-left: 26px;
    padding-right: 26px;
  }

  .before-after-content_wrapper.--full-width,
  .before-after-content_wrapper.--full-width.--row-reverse{
    flex-direction: column-reverse;
  }

  .before-after-content_wrapper.--full-width .before-after-content_col-description{
    padding-left: 26px;
    padding-right: 26px;
  }

  .bf-caption_subheading.button.button--icn{
    --button-background: transparent;
    --button-text: var(--section-heading-color);
    --button-hover-text: var(--section-links-color);
    --button-border-color: transparent;
    --button-hover-background: transparent;
    --button-hover-border-color: transparent;
    --button-padding-x: 0;
    --button-padding-y: 0.5rem;
    line-height: 1.4rem;
    font-size: 1.2rem;
    text-decoration: underline;
  }

  .bf-wrapper_image--after .bf-caption_subheading.button.button--icn,
  .bf-caption_col--second{
    text-align: end;
  }

  .bf-wrapper_image--before .bf-caption_subheading.button.button--icn{
    text-align: left;
  }

  .bf-caption_description{
    color: var(--section-alternative-color);
  }

  @media (min-width: 576px){
    .bf-wrapper,
    .bf-wrapper_image,
    .bf-wrapper_image--after,
    .bf-wrapper_pointer{
      --height-factor: 0.7;
    }

    .bf-caption_col{
      padding: 33px 40px;
    }
  }

  @media (min-width: 768px){
    .bf-wrapper,
    .bf-wrapper_image,
    .bf-wrapper_image--after,
    .bf-wrapper_pointer{
      --height-factor: 0.85;
    }

    .bf-outer-wrap,
    .bf-caption{
      margin-bottom: 0;
    }

    .bf-caption{
      padding-top: 20px;
    }

    .before-after-content_wrapper.--row-reverse{
      flex-direction: row-reverse;
    }

    .before-after-content{
      --q-align-value: var(--desktop-q-align);
    }

    .before-after-content_wrapper{
      display: flex;
      column-gap: 10px;
      flex-direction: unset;
    }

    .before-after-content_col-media,
    .bf-caption{
      width: 48%;
    }

    .before-after-content_col-description{
      flex-grow: 1;
      width: unset;
      padding-left: 0;
      padding-right: 0;
    }

    .--hidden-desktop{
      display: none;
    }
  }

  @media (min-width: 992px){
    .bf-wrapper,
    .bf-wrapper_image,
    .bf-wrapper_image--after,
    .bf-wrapper_pointer{
      --height-factor: 1.07;
    }
  }

  @media (min-width: 1200px){
    .before-after-content_wrapper{
      column-gap: 50px;
    }

    .before-after-content_caption {
      margin-bottom: 50px;
    }
  }

  @media (max-width: 767px){
    .--hidden-mobile{
      display: none;
    }
  }

  @media (max-width: 414px){
    .bf-caption_heading{
      font-size: 1.2rem;
      line-height: 2.4rem;
    }
  }
{%- endstyle -%}
<div class="global-block {{ section_prefix_class }} {{ section_prefix_class }}-{{ section.id }} {% if section_container_layout == 'container-fluid' or section_container_layout == 'contained-container' %}{{ section_scheme_class }} {{ section_corner_radius }}{% endif %} {{ section_prefix_class }}--bdr-bottom {{ section_prefix_class }}--bdr-top" style="--section-padding-top: {{ section.settings.section_top_padding }}px; --section-padding-bottom: {{ section.settings.section_bottom_padding }}px; --mobile-q-align: {{ section.settings.section_mobile_text_alignment }}; --desktop-q-align: {{ section.settings.section_text_alignment }};">
  <div class="{{ section_container_layout }}">
    <div class="{{ section_prefix_class }}_wrapper --full-width {% if section_container_layout == 'container' %}{{ section_scheme_class }} {{ section_corner_radius }} internal--spacing{% endif %}">
      <div class="{{ section_prefix_class }}_col {{ section_prefix_class }}_col-media {{ content_unavailable }}">
        {%- render 'before-after', height: bf_height, loading_attr: loading_attr, section_corner_radius: section_corner_radius -%}
      </div>
    </div>
  </div>
</div>
{% schema %}
{
  "name": "t:sections.before_after_content.name",
  "tag": "section",
  "disabled_on": {
    "groups": [
      "header",
      "footer",
      "custom.overlay"
    ]
  },
  "settings": [
    {
      "type": "header",
      "content": "t:sections.before_after_content.settings.cursor.content"
    },
    {
      "type": "range",
      "id": "after_position",
      "label": "t:sections.before_after_content.settings.cursor.position.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 50,
      "unit": "%"
    },
    {
      "type": "header",
      "content": "t:layout.content"
    },
    {
      "type": "select",
      "id": "section_container_layout",
      "label": "t:settings_schema.container_layout.label",
      "options": [
        {
          "value": "page-width",
          "label": "t:settings_schema.container_layout.settings.container.label"
        },
        {
          "value": "contained-content",
          "label": "t:settings_schema.container_layout.settings.contained_content.label"
        },
        {
          "value": "container-fluid",
          "label": "t:settings_schema.container_layout.settings.container_fluid.label"
        }
      ],
      "default": "page-width"
    },
    {
      "type": "select",
      "id": "section_corner_radius",
      "label": "t:round_crnr.label",
      "options": [
        {
          "value": "no_corners_radius",
          "label": "t:round_crnr.options.opt_1.label"
        },
        {
          "value": "top_corners_radius",
          "label": "t:round_crnr.options.opt_2.label"
        },
        {
          "value": "bottom_corners_radius",
          "label": "t:round_crnr.options.opt_3.label"
        },
        {
          "value": "both_corners_radius",
          "label": "t:round_crnr.options.opt_4.label"
        }
      ],
      "default": "both_corners_radius"
    },
    {
      "type": "select",
      "id": "bf_height",
      "label": "t:media.label",
      "options": [
        {
          "value": "small",
          "label": "t:media.options.opt_5.label"
        },
        {
          "value": "medium",
          "label": "t:media.options.opt_6.label"
        },
        {
          "value": "large",
          "label": "t:media.options.opt_7.label"
        }
      ],
      "default": "small"
    },
    {
      "type": "color_scheme",
      "id": "section_color_scheme",
      "default": "scheme1",
      "label": "t:color_scheme.label"
    },
    {
      "type": "header",
      "content": "t:spacing.content"
    },
    {
      "type": "range",
      "id": "section_top_padding",
      "label": "t:spacing.settings.top.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 50,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "section_bottom_padding",
      "label": "t:spacing.settings.bottom.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 50,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "name": "t:sections.before_after_content.blocks.before.name",
      "type": "before",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:image.label",
          "info": "t:sections.before_after_content.settings.image.info"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "t:heading.label",
          "default": "Before"
        },
        {
          "type": "select",
          "id": "heading_size",
          "label": "t:sizes.heading.label",
          "options": [
            {
              "value": "h3",
              "label": "t:sizes.heading.options.opt_3.label"
            },
            {
              "value": "h4",
              "label": "t:sizes.heading.options.opt_4.label"
            },
            {
              "value": "h5",
              "label": "t:sizes.heading.options.opt_5.label"
            },
            {
              "value": "h6",
              "label": "t:sizes.heading.options.opt_6.label"
            }
          ],
          "default": "h6"
        },
        {
          "type": "select",
          "id": "heading_weight",
          "label": "t:weight.heading.label",
          "options": [
            {
              "value": "--fw-extra-bold",
              "label": "t:weight.heading.options.opt_6.label"
            },
            {
              "value": "--fw-bold",
              "label": "t:weight.heading.options.opt_1.label"
            },
            {
              "value": "--fw-semi-bold",
              "label": "t:weight.heading.options.opt_5.label"
            },
            {
              "value": "--fw-medium",
              "label": "t:weight.heading.options.opt_2.label"
            },
            {
              "value": "--fw-normal",
              "label": "t:weight.heading.options.opt_3.label"
            }
          ],
          "default": "--fw-bold"
        },
        {
          "type": "text",
          "id": "description",
          "label": "t:description_text.label",
          "default": "Description"
        },
        {
          "type": "select",
          "id": "description_size",
          "label": "t:sizes.description_text.label",
          "options": [
            {
              "value": "text-size--small",
              "label": "t:sizes.text.options.opt_1.label"
            },
            {
              "value": "text-size--medium",
              "label": "t:sizes.text.options.opt_2.label"
            },
            {
              "value": "text-size--large",
              "label": "t:sizes.text.options.opt_3.label"
            },
            {
              "value": "text-size--xlarge",
              "label": "t:sizes.text.options.opt_4.label"
            }
          ],
          "default": "text-size--large"
        },
        {
          "type": "select",
          "id": "description_weight",
          "label": "t:weight.description_text.label",
          "options": [
            {
              "value": "--fw-extra-bold",
              "label": "t:weight.heading.options.opt_6.label"
            },
            {
              "value": "--fw-bold",
              "label": "t:weight.heading.options.opt_1.label"
            },
            {
              "value": "--fw-semi-bold",
              "label": "t:weight.heading.options.opt_5.label"
            },
            {
              "value": "--fw-medium",
              "label": "t:weight.heading.options.opt_2.label"
            },
            {
              "value": "--fw-normal",
              "label": "t:weight.heading.options.opt_3.label"
            },
            {
              "value": "--fw-light",
              "label": "t:weight.heading.options.opt_4.label"
            }
          ],
          "default": "--fw-bold"
        },
        {
          "type": "color_scheme",
          "id": "before_color_scheme",
          "default": "scheme1",
          "label": "t:color_scheme.label"
        }
      ]
    },
    {
      "name": "t:sections.before_after_content.blocks.after.name",
      "type": "after",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:image.label",
          "info": "t:sections.before_after_content.settings.image.info"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "t:heading.label",
          "default": "After"
        },
        {
          "type": "select",
          "id": "heading_size",
          "label": "t:sizes.heading.label",
          "options": [
            {
              "value": "h3",
              "label": "t:sizes.heading.options.opt_3.label"
            },
            {
              "value": "h4",
              "label": "t:sizes.heading.options.opt_4.label"
            },
            {
              "value": "h5",
              "label": "t:sizes.heading.options.opt_5.label"
            },
            {
              "value": "h6",
              "label": "t:sizes.heading.options.opt_6.label"
            }
          ],
          "default": "h6"
        },
        {
          "type": "select",
          "id": "heading_weight",
          "label": "t:weight.heading.label",
          "options": [
            {
              "value": "--fw-extra-bold",
              "label": "t:weight.heading.options.opt_6.label"
            },
            {
              "value": "--fw-bold",
              "label": "t:weight.heading.options.opt_1.label"
            },
            {
              "value": "--fw-semi-bold",
              "label": "t:weight.heading.options.opt_5.label"
            },
            {
              "value": "--fw-medium",
              "label": "t:weight.heading.options.opt_2.label"
            },
            {
              "value": "--fw-normal",
              "label": "t:weight.heading.options.opt_3.label"
            }
          ],
          "default": "--fw-bold"
        },
        {
          "type": "text",
          "id": "description",
          "label": "t:description_text.label",
          "default": "Description"
        },
        {
          "type": "select",
          "id": "description_size",
          "label": "t:sizes.description_text.label",
          "options": [
            {
              "value": "text-size--small",
              "label": "t:sizes.text.options.opt_1.label"
            },
            {
              "value": "text-size--medium",
              "label": "t:sizes.text.options.opt_2.label"
            },
            {
              "value": "text-size--large",
              "label": "t:sizes.text.options.opt_3.label"
            },
            {
              "value": "text-size--xlarge",
              "label": "t:sizes.text.options.opt_4.label"
            }
          ],
          "default": "text-size--large"
        },
        {
          "type": "select",
          "id": "description_weight",
          "label": "t:weight.description_text.label",
          "options": [
            {
              "value": "--fw-extra-bold",
              "label": "t:weight.heading.options.opt_6.label"
            },
            {
              "value": "--fw-bold",
              "label": "t:weight.heading.options.opt_1.label"
            },
            {
              "value": "--fw-semi-bold",
              "label": "t:weight.heading.options.opt_5.label"
            },
            {
              "value": "--fw-medium",
              "label": "t:weight.heading.options.opt_2.label"
            },
            {
              "value": "--fw-normal",
              "label": "t:weight.heading.options.opt_3.label"
            },
            {
              "value": "--fw-light",
              "label": "t:weight.heading.options.opt_4.label"
            }
          ],
          "default": "--fw-bold"
        },
        {
          "type": "color_scheme",
          "id": "after_color_scheme",
          "default": "scheme1",
          "label": "t:color_scheme.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.before_after_content.name",
      "blocks": [
        {
          "type": "before",
          "settings": {
          }
        },
        {
          "type": "after",
          "settings": {
          }
        }
      ]
    }
  ]
}
{% endschema %}